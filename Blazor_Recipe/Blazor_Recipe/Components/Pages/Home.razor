@page "/"
@using Blazor_Recipe.Components.Components
@inject Shared.RecipeService RecipeService
<PageTitle>Home</PageTitle>

@attribute [RenderModeInteractiveServer]
@attribute [StreamRendering(true)]

<Blazor_Recipe.Client.Components.RecipeSearch OnClickCallback="@GetRecipes" />
@if (_recipes is null)
{
    <MudText>Loading...</MudText>
}
else
{

    @foreach (var recipe in _recipes)
    {
        <RecipeCard Recipe="recipe" />
    }
}
@code {
    private IEnumerable<Shared.Models.Recipe> _recipes = Enumerable.Empty<Shared.Models.Recipe>();


    private async Task GetRecipes(string ingredients)
    {
        _recipes = (await RecipeService.GetRecipesAsync_Fake(ingredients)).ToList();

    }
}
